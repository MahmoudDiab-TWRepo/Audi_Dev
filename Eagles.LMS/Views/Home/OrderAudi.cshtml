@model OrderEnquiry
@{
    ViewBag.Title = "OrderAudi";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var requestStatus = TempData.Peek("RequestStatus") as RequestStatus;
    UnitOfWork ctx = new UnitOfWork();
    var id = ViewBag.Id;
    var car = new Eagles.LMS.BLL.UnitOfWork().carManager.GetAllBind().Where(s => s.ID == id).FirstOrDefault();
    var EnginCapacityData = ViewBag.EnginCapacityData;
    if (EnginCapacityData == null)
    {
        EnginCapacityData = ctx.EnginCapacityManager.GetAll().ToList();
    }
    var EnginCapacityDataNew = ViewBag.EnginCapacityDataNew;
    if (EnginCapacityDataNew == null)
    {
        EnginCapacityDataNew = ctx.EnginCapacityManager.GetAll().ToList();
    }


    var carmodel = new Eagles.LMS.BLL.UnitOfWork().categoryManager.GetAllBind();
    var EngCapacity = new Eagles.LMS.BLL.UnitOfWork().EnginCapacityManager.GetAllBind();
}

@section EndHeader{
    <style>
        .DemonstratorTop {
            display: none;
        }

        .otherheader {
            display: none;
        }
    </style>
}

<!--start our box-->
<!--start login head-->
<div class="login-head">
    <div class="container">
        <div class="login-links">
            @*<a href="/Home/makeEnquiry" class="enquiry-link ">make an Enquiry</a>*@
            @*<a href="/Home/OrderAudi" class="enquiry-link active">order your audi</a>*@
        </div>
    </div>
</div>
<!--end login head-->
<!--start login form-->
<div class="login-form OrderAudiForm">
    <div class="container">


        @using (Html.BeginForm("OrderAudi", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

            @Html.HiddenFor(s => s.ChassisNumber)
            <div class="row">
                <div class="col-md-12 col-lg-12">
                    <div class="col-lg-12 col-md-12 col-sm-2 co-xs-12" style="display:none">
                        <div class="form-group">
                            <label>CarName <span>*</span></label>
                            @Html.TextBoxFor(s => s.CarID, null, new
                       {
                           @class = "",
                           @id = "CarName",
                           @readonly = "readonly"
                       })
                        </div>
                    </div>

                    <div class="col-lg-12 col-md-12 col-sm-2 co-xs-12" style="display:none">
                        <div class="form-group">
                            <label>Car Code <span>*</span></label>
                            @Html.TextBoxFor(s => s.CarCode, null, new
                       {
                           @class = "",
                           @id = "CarCode",
                           @readonly = "readonly"
                       })




                        </div>
                    </div>



                    <form class="log-in" method="post">
                        <div class="row">

                            <div class="col-lg-12">

                                <div class="mt-4 mb-4">

                                    <div class="form-check form-radio-primary mb-3">
                                        @Html.CheckBoxFor(s => s.ImAnOudiowner, new
                                   {
                                       @class = "form-check-input",
                                       @id = "Audiowner",
                                       type = "radio",
                                       name = "Audiowner",
                                       onclick = "yesnoCheck();",
                                       placeholder = "Show In Home Page"
                                   })
                                        <label for="Audiowner" class="form-check-label" style="cursor:pointer;">I’m an Audi owner</label>

                                    </div>



                                    <div class="form-check form-radio-primary mb-3">
                                        @Html.CheckBoxFor(s => s.ImAnOudiowner, new
                                   {
                                       @class = "form-check-input",
                                       @id = "wanttobe",
                                       type = "radio",
                                       name = "Audiowner",
                                       onclick = "yesnoCheck();",
                                       placeholder = "Show In Home Page"
                                   })
                                        <label for="wanttobe" class="form-check-label" style="cursor:pointer;">I want to be an Audi owner</label>

                                    </div>

                                </div>

                            </div>

                            <div class="col-lg-12 col-md-12 col-sm-12" style="display:none" id="ExistingAudi">
                                <div class="form-group">
                                    <h2>Existing Audi Customer:</h2>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12" id="RequestedAudi" style="display:none">
                                <div class="form-group">
                                    <h2>Requested Audi Model:</h2>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Full name</label>
                                    @Html.TextBoxFor(s => s.FullName, null, new
                                    {
                                        @class = "form-control",
                                        placeholder = "Enter your name"
                                    })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Mobile number</label>
                                    @Html.TextBoxFor(s => s.MobileNumber, null, new
                                    {
                                        @class = "form-control",
                                        placeholder = "Enter your mobile"
                                    })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Email Address</label>
                                    @Html.TextBoxFor(s => s.EmailAddress, null, new
                                   {
                                       @class = "form-control",
                                       type = "email",
                                       placeholder = "Enter Your Email"
                                   })
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Car model</label>
                                    @Html.DropDownListFor(x => Model.OldCarModel, new SelectList(carmodel,
                                  "ID", "Name"), htmlAttributes: new { @class = "form-control", onchange = "GetValue()", id = "OldCarModel" })
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Engine capacity</label>
                                    @*<select class="form-control " name="req_capacity">
                                        <option value="1.4 cc">1.4 cc</option>
                                        <option value="2.0 cc">2.0 cc</option>
                                    </select>*@

                                    @Html.DropDownListFor(x => Model.OldEnginCapacity, new SelectList(EnginCapacityData,
                              "Id", "Name"), htmlAttributes: new { @class = "form-control", @id = "OldEnginCapacity" })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Model year</label>

                                    @Html.DropDownListFor(model => model.OldModelYear,
                                              new List<SelectListItem> {
                                                   new SelectListItem { Value = "" , Text = "Choose year " },
                                                   new SelectListItem { Value = "2022" , Text = " 2022" },
                                                   new SelectListItem { Value = "2021" , Text = " 2021 " },
                                                   new SelectListItem { Value = "2020" , Text = " 2020 " },
                                                   new SelectListItem { Value = "2019" , Text = " 2019 " },
                                                   new SelectListItem { Value = "2018" , Text = " 2018 " },
                                                   new SelectListItem { Value = "2017" , Text = " 2017 " },
                                                   new SelectListItem { Value = "2016" , Text = " 2016 " },
                                                   new SelectListItem { Value = "2015" , Text = " 2015 " },
                                                   new SelectListItem { Value = "2014" , Text = " 2014 " },

                                                },
                                              new { @class = "form-control", @id = "ExperianceLevelID" })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Mileage</label>
                                    @Html.TextBoxFor(s => s.OldMileage, null, new
                                    {
                                        @class = "form-control",

                                        placeholder = "Enter your Mileage"
                                    })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Chassis number</label>
                                    <input type="file" class="form-control" name="uploadattachments" id="uploadattachments" placeholder="Enter your Mileage">

                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 RemoveInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Comment</label>
                                    @Html.TextAreaFor(s => s.OldComment, new
                                    {
                                        @class = "form-control",
                                    })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 RemoveInput " style="display:none">
                                <div class="form-group">
                                    <h2>Requested Audi Model:</h2>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Car model</label>
                                    @Html.DropDownListFor(x => Model.CarModel, new SelectList(carmodel,
                              "ID", "Name"), htmlAttributes: new { @class = "form-control", onchange = "GetValueNew()", id = "CarModel" })
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">

                                    <label for="">Engine capacity</label>


                                    @Html.DropDownListFor(x => Model.EnginCapacity, new SelectList(EnginCapacityDataNew,
                              "Id", "Name"), htmlAttributes: new { @class = "form-control", @id = "EnginCapacity" })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Mileage</label>
                                    @Html.TextBoxFor(s => s.Mileage, null, new
                                    {
                                        @class = "form-control",
                                        placeholder = "Enter your Mileage"
                                    })
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Model year</label>
                                    @Html.DropDownListFor(model => model.ModelYear,
                                              new List<SelectListItem> {
                                                   new SelectListItem { Value = "" , Text = "Choose year " },
                                                   new SelectListItem { Value = "2022" , Text = " 2022" },
                                                   new SelectListItem { Value = "2021" , Text = " 2021 " },
                                                   new SelectListItem { Value = "2020" , Text = " 2020 " },
                                                   new SelectListItem { Value = "2019" , Text = " 2019 " },
                                                   new SelectListItem { Value = "2018" , Text = " 2018 " },
                                                   new SelectListItem { Value = "2017" , Text = " 2017 " },
                                                   new SelectListItem { Value = "2016" , Text = " 2016 " },
                                                   new SelectListItem { Value = "2015" , Text = " 2015 " },
                                                   new SelectListItem { Value = "2014" , Text = " 2014 " },

                                                },
                                              new { @class = "form-control", @id = "ExperianceLevelID" })

                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ConstInput " style="display:none">
                                <div class="form-group">
                                    <label for="">Comment</label>
                                    @Html.TextAreaFor(s => s.Comment, new
                                    {
                                        @class = "form-control",
                                    })
                                </div>
                            </div>












                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="BTNSUB">
                                    <button type="submit">Submit</button>
                                </div>
                            </div>
                        </div>



                    </form>
                </div>

            </div>
        }





    </div>

    <div class="audi-submit">
        <div class="container">
            <p>Audi Australia may collect, hold and use your personal information for a range of purposes, including any purpose identified or inferred at the time of collection, including for marketing to you, identifying you and any Audi vehicle you own, to offer you services, marketing materials, lifestyle content or other offers. You are not required to provide your personal information, or your real name. However, if you choose not to provide us with your personal information or your real name, we may not be able to fulfil the purpose(s) described above. For full details, see our<a href="https://www.audi-eg.com/eg/web/en/tools/navigation/layer/legal/privacy-policy.html">Privacy Policy</a>.</p>
        </div>
    </div>
</div>
<!--end login form-->
<!--end our box-->

@section EndBody{


    <script>
        function GetValue() {
            var select = document.getElementById('OldCarModel')
            var value = select.options[select.selectedIndex].value;

            GetEngin(value);
        }
        GetValue();
        function GetEngin(Id) {
                 $.ajax({
                    type: "POST",
                     url: "/Home/GetEnginCapacity",
                     data: JSON.stringify({ Id: Id }),
                    contentType: 'application/json; charset=utf-8',
                     success: (response) => {
                         var jsonresponse = JSON.parse(response);
                         if (jsonresponse.length != 0) {
                             var select = $("#OldEnginCapacity");
                             select.empty();
                             for (let i = 0; i < jsonresponse.length; i++) {
                                 select.append($('<option/>', {
                                     value: jsonresponse[i].Id,
                                     text: jsonresponse[i].Name
                                 }));
                                }
                            }

                    }, error: (error) => {
                     }

                });
        }



        function GetValueNew() {
            var select = document.getElementById('CarModel')
            var value = select.options[select.selectedIndex].value;
            GetEnginNew(value);
        }
        GetValueNew();
        function GetEnginNew(Id) {
            $.ajax({
                type: "POST",
                url: "/Home/GetEnginCapacityNew",
                data: JSON.stringify({ Id: Id }),
                contentType: 'application/json; charset=utf-8',
                success: (response) => {

                    var jsonresponse = JSON.parse(response);
                    if (jsonresponse.length != 0) {
                        var select = $("#EnginCapacity");
                        select.empty();
                        for (let i = 0; i < jsonresponse.length; i++) {
                            select.append($('<option/>', {
                                value: jsonresponse[i].Id,
                                text: jsonresponse[i].Name
                            }));
                        }
                    }

                }, error: (error) => {
                }

            });
        }


        $(document).ready(function () {

        });
    </script>

    <script>
        $(document).ready(function () {
        });
        function yesnoCheck() {

            ExistingAudi = document.getElementById('ExistingAudi')
            RequestedAudi = document.getElementById('RequestedAudi')



            if (document.getElementById('Audiowner').checked) {

                ExistingAudi.style.display = 'block';
                RequestedAudi.style.display = 'none';
                $('.ConstInput').addClass('d-block');
                $('.RemoveInput').addClass('d-block');
            }
            if (document.getElementById('wanttobe').checked) {

                ExistingAudi.style.display = 'none';
                RequestedAudi.style.display = 'block';
                $('.ConstInput').addClass('d-block');
                $('.RemoveInput').removeClass('d-block');
            }

        }
    </script>


    <script>

        $(document).ready(function () {

            document.getElementById('CarName').setAttribute("value", `@car.CarName`);
        });

    </script>

    <script>

        $(document).ready(function () {

            document.getElementById('CarCode').setAttribute("value", `@car.CarCode`);
        });

    </script>
}
